# Terminalコマンド集

MacのTerminalで利用するコマンドをまとめる。

## 出典

- [Macのターミナルコマンド一覧（基本編）](https://qiita.com/ryouzi/items/f9dee1540a04a0bfb9a3)

## ls コマンド

```bash
ls  #カレントディレクトリにあるファイルやディレクトリを表示する
ls -l  #ファイルやディレクトリの詳細も同時に表示する
ls -a  #隠しファイルも含めファイルやディレクトリを全て表示する
ls -la  #隠しファイルを含む全てのファイルやディレクトリの詳細を表示する
```

## chmod コマンド

`chmod` は **ファイル／ディレクトリの「アクセス権（パーミッション）」を変更する**ためのコマンド（macOS でも Linux でも基本は同じ）。

---

### 1) パーミッションの基本（誰が・何をできるか）
パーミッションは主に次の3種類の操作権から成る。

- `r` = read（読み取り）
- `w` = write（書き込み）
- `x` = execute（実行 / ディレクトリの場合は「入れる・辿れる」）

そして「誰に対して」の区分が3つある。

- `u` = user（所有者）
- `g` = group（所有グループ）
- `o` = others（その他）
- `a` = all（u+g+o）

`ls -l` の先頭に出る例（イメージ）：

```textmate
-rwxr-xr--
```
- 1文字目 `-` は「ファイル」(`d` ならディレクトリ)
- 次の3文字 `rwx` が **所有者(u)** の権限
- 次の3文字 `r-x` が **グループ(g)** の権限
- 次の3文字 `r--` が **その他(o)** の権限

---

### 2) `chmod` の書き方は2系統：数値（8進）と記号
#### A. 数値（8進）で指定（よく使う）
`r=4, w=2, x=1` を足し算して `u g o` の順に並べる。

- `7 = 4+2+1 = rwx`
- `6 = 4+2 = rw-`
- `5 = 4+1 = r-x`
- `4 = 4 = r--`
- `0 = ---`

例：
- `chmod 644 file` → `rw-r--r--`（所有者は読書可、他は読むだけ）
- `chmod 755 script.sh` → `rwxr-xr-x`（所有者は実行可、他も実行可）
- `chmod 600 id_rsa` → `rw-------`（秘密鍵などで典型）

```bash
chmod 644 example.txt
chmod 755 run.sh
chmod 600 secret.key
```


#### B. 記号で指定（差分変更に強い）
書式：`chmod [対象][+|-|=][権限] ファイル`

- `+` 追加、`-` 削除、`=` 置き換え

よくある例：

```bash
chmod +x run.sh          # 全員(a)に実行権(x)を追加（a が省略されている扱い）
chmod u+x run.sh         # 所有者(u)だけ実行権を追加
chmod go-w config.yml    # group/others から書き込みを削除
chmod a=r file.txt       # 全員を「読み取りのみ」に置き換え（書き込み/実行を外す）
```

---

### 3) ディレクトリでの `x` の意味（重要）
ディレクトリに対して：

- `r`：中身の一覧を読める（`ls` できる）
- `x`：そのディレクトリに入れる／パスを辿れる（`cd` できる、配下にアクセスできる）
- `w`：作成・削除・名前変更ができる（ただし条件あり）

「ディレクトリに `r` だけあって `x` がない」と、一覧は見えても中に入れない…など、直感とズレることがあるので注意。

---

### 4) よく使うオプション：再帰的に変更 `-R`
配下もまとめて変えたいとき：

```bash
chmod -R 755 mydir
```


注意点：
- 乱暴に `-R 777` みたいなのは事故の元です（書き込みまで全開放になるため）。
- 実行ファイルだけ `x` を付けたい、というケースでは数値一発より記号指定や選別の方が安全なことが多い。

---

### 5) 典型的な「実行できない」問題の直し方
スクリプトが `Permission denied` になるときは実行権が無いことが多い。

```bash
chmod +x script.sh
./script.sh
```

（補足：シェバン `#!/bin/sh` などの先頭行や改行コードの問題で動かない場合もあるが、まずは `+x` が定番。）

---

### 6) 参考：`chown` / `chgrp` との違い
- `chmod`：権限（r/w/x）を変える
- `chown`：所有者を変える
- `chgrp`：グループを変える

---
